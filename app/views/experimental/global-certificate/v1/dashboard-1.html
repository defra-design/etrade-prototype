{% set serviceName = "Apply for an export health certificate"%}
{% extends "layout.html" %}

{% block pageTitle %}
Your applications - EEHC - GOVUK
{% endblock %}

{% block beforeContent%}
{% block navigation %}{% include './components/_navigation.html' %}{% endblock %}
{% endblock %}
{% block content %}



  {% set list =  data.applications %}
  <style>
    main {
      padding-top: 0px !important;
    }
    .green-tag {
      background: #00823b
    }
  </style>
  <style>
    #filter-cert-org #filter-container {
      bottom: 0px;
      color: rgb(255, 255, 255);
      height: 40px;
      left: 0px;
      position: relative;
      right: 0px;
      text-decoration: none solid rgb(255, 255, 255);
      text-size-adjust: 100%;
      top: 0px;
      width: 300px;
      column-rule-color: rgb(255, 255, 255);
      perspective-origin: 150px 20px;
      transform-origin: 150px 20px;
      caret-color: rgb(255, 255, 255);
      background: rgb(0, 94, 165) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 36 36' width='40' height='40'%3E%3Cpath d='M25.7 24.8L21.9 21c.7-1 1.1-2.2 1.1-3.5 0-3.6-2.9-6.5-6.5-6.5S10 13.9 10 17.5s2.9 6.5 6.5 6.5c1.6 0 3-.6 4.1-1.5l3.7 3.7 1.4-1.4zM12 17.5c0-2.5 2-4.5 4.5-4.5s4.5 2 4.5 4.5-2 4.5-4.5 4.5-4.5-2-4.5-4.5z' fill='white'%3E%3C/path%3E%3C/svg%3E") no-repeat scroll 0% 0% / 40px 40px padding-box border-box;
      border: 0px none rgb(255, 255, 255);
      font: normal normal 400 normal 16px / normal "Times New Roman";
      outline: rgb(255, 255, 255) none 0px;
    }
    /*#filter-container*/
    #filter-cert-org #filter-container:after {
      color: rgb(255, 255, 255);
      text-decoration: none solid rgb(255, 255, 255);
      text-size-adjust: 100%;
      column-rule-color: rgb(255, 255, 255);
      caret-color: rgb(255, 255, 255);
      border: 0px none rgb(255, 255, 255);
      font: normal normal 400 normal 16px / normal "Times New Roman";
      outline: rgb(255, 255, 255) none 0px;
    }
    /*#DIV_4:after*/
    #filter-cert-org #filter-container:before {
      color: rgb(255, 255, 255);
      text-decoration: none solid rgb(255, 255, 255);
      text-size-adjust: 100%;
      column-rule-color: rgb(255, 255, 255);
      caret-color: rgb(255, 255, 255);
      border: 0px none rgb(255, 255, 255);
      font: normal normal 400 normal 16px / normal "Times New Roman";
      outline: rgb(255, 255, 255) none 0px;
    }
    /*#DIV_4:before*/
    #filter-cert-org #filter-input {
      bottom: 0px;
      height: 22px;
      left: 0px;
      position: relative;
      right: 0px;
      text-size-adjust: 100%;
      top: 0px;
      width: 260px;
      perspective-origin: 130px 20px;
      transform-origin: 130px 20px;
      border: 2px solid rgb(255, 255, 255);
      font: normal normal 400 normal 19px / 25px nta, Arial, sans-serif;
      margin: 0px 0px 0px 40px;
      padding: 9px 10px 5px;
      border: solid 2px #000;
      outline: none;
    }
    /*#filter-input*/
    #filter-cert-org #filter-input:focus {
      border: solid 2px #ffbf47;
      outline: none;
    }
    /*#filter-input*/
    #filter-cert-org #filter-input:after {
      text-size-adjust: 100%;
      font: normal normal 400 normal 19px / 25px nta, Arial, sans-serif;
    }
    /*#filter-input:after*/
    #filter-cert-org #filter-input:before {
      text-size-adjust: 100%;
      font: normal normal 400 normal 19px / 25px nta, Arial, sans-serif;
    }
    /*#filter-input:before*/
    .govuk-details__summary:before {
      display: none
    }
    .app-status-tag {
      display: inline-block;
      outline: 2px solid transparent;
      outline-offset: -2px;
      color: #fff;
      /* background-color: #1d70b8; */
      letter-spacing: 1px;
      text-decoration: none;
      text-transform: uppercase;
      white-space: nowrap;
      font-family: "GDS Transport", Arial, sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      font-weight: 700;
      font-size: 14px;
      font-size: .875rem;
      line-height: 1;
      padding-top: 5px;
      padding-right: 8px;
      padding-bottom: 4px;
      padding-left: 8px
    }
    .app-status-tag--blue {
      border: 3px solid #1d70b8;
      background-color: #1d70b8;
      width: 90px;
      text-align: center;
      display: inline-block;
      font-size: 12px;
    }
    .app-status-tag--grey {
      background-color: #f3f2f1;
      width: 90px;
      text-align: center;
      display: inline-block;
      font-size: 12px;
      border: 3px solid #f3f2f1;
      color: #0b0c0c;
    }
    .app-status-tag--turquoise {
      background-color: #1d70b8;
      width: 90px;
      text-align: center;
      display: inline-block;
      font-size: 12px;
    }
    .app-status-tag--green {
      background-color: #00703c;
      border: 3px solid #00703c;
      width: 90px;
      text-align: center;
      display: inline-block;
      font-size: 12px;
    }
    .app-status-tag--outline {
      color: #00703c;
      background-color: #FFF;
      border: 3px solid #00703c;
      width: 90px;
      text-align: center;
      display: inline-block;
      font-size: 12px;
    }
    .js-enabled #clearFilter{
        display:none;
    }
  </style>
  <div class="govuk-grid-row govuk-!-margin-top-8">
    <div class="govuk-grid-column-two-thirds">

      <h1 class="govuk-heading-xl">Your applications</h1>
      <a class="govuk-button" href="recent-certificates?isSignedIn=yes" style="display: inline-block;">Start a new application</a>
    </div>
  </div>

  {% block filterBar %}{% include "./components/_filter-bar.html" %}{% endblock %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      {% block filter %}{% include "./components/_filter-content-block-2.html" %}{% endblock %}
    </div>
    <div class="govuk-grid-column-full">
      <div class="filter-tag--wrapper govuk-!-margin-bottom-6" data-module="track-click">
        <p class="govuk-body govuk-!-margin-bottom-2">
          <span id="js-case-count">8</span> applications

        </p>
        <p class="govuk-body" id="clearFilter">
          <a href="?filter_status=&amp;has_filter=&amp;date_range=&amp;filter_name=&amp;show_applications_by=me" class="govuk-link govuk-link--no-visited-state govuk-!-font-size-19" data-module="govuk-button">
            Clear filter
          </a>
        </p>
      </div>
      <div class="govuk-grid-row">
        <div class="govuk-grid-column-full">
          <table class="govuk-table responsive-table responsive-table--s">
            <thead class="govuk-table__head">
              <tr class="govuk-table__row">
                <th class="govuk-table__header">
                  <div class="applicationRef-column" style="width:15%">Application reference</div>
                </th>
                <th class="govuk-table__header">EHC</th>

                <th class="govuk-table__header" style="width:5%!important">Destination</th>
                <th class="govuk-table__header">Submitted</th>
                <!-- <th class="govuk-table__header">Export date</th> -->
                <th class="govuk-table__header">Format</th>
                <th class="govuk-table__header">Status</th>
                <th class="govuk-table__header"></th>
              </tr>
            </thead>
                        <tbody>

              {% set list =  data.applications[0].applications %}

              {% set month = 2 %}
              {% set year = 2023 %}
              {% set day =  [1,2,3,4,5,6,7,8,9,11,12,14,16,17,19,20,23,25,26,27,28] | random %}
              {% for app in list %}

              {% set link = "./echo/application?id="+(loop.index-1) %}
              {% set copyLink = "./echo/copy?id="+(loop.index-1) %}
              {% if app.type == 'Digital'%}
              {% set link = "application?id="+(loop.index-1) %}
              {% set copyLink = "copy-application?id="+(loop.index-1) %}
              {% else %}
              {% if app.isEU == "yes" %}
              {% set copyLink = "changes-to-service-copy?id="+(loop.index-1) %}
              {% endif %}
              {% endif %}
              <tr class="govuk-table__row result">
                <th id="1721147986456-appRef" class="govuk-table__cell applicationRef-column table-header" scope="row">
                  <a href="{{link}}" class="govuk-link govuk-link--no-visited-state"> <span class="table-heading table-heading-full" aria-hidden="true">Reference</span> {{app.reference or app.applicationID}}</a>

                  {% if app.is_block == "yes"%}
                  <div class=" govuk-!-margin-top-1 govuk-!-font-weight-regular">Block of 50 certificates</div>
                  {% endif %}
                </th>
                <td id="1721147986456-group-number" class="govuk-table__cell" scope="row">
                  <span class="table-heading" aria-hidden="true">EHC </span>
                  <span title="">{{app.EHC}}</span>
                </td>

                <td id="1721147986456-submitted" class="govuk-table__cell submitted-column" scope="row">
                  <span class="table-heading" aria-hidden="true">Destination </span>
                  {{app.destination}}
                </td>
                <td id="1721147986456-submitted" class="govuk-table__cell submitted-column" scope="row">
                  <span class="table-heading" aria-hidden="true">Submitted on</span>
                  {{app.submitDate or "-"}}
                </td>
                <td id="1721147986456-submitted" class="govuk-table__cell submitted-column" scope="row">
                  <span class="table-heading" aria-hidden="true">Proposed export</span>
                  {{day | getDate(month,year)}}
                </td>
                <td id="1721147986456-submitted" class="govuk-table__cell submitted-column" scope="row">
                  <span class="table-heading" aria-hidden="true">Type </span>
                  {% if app.type != "Digital" %}
                    Paper
                  {% else %}
                    Digital
                  {% endif%}
                </td>
                <td id="1721147986456-status" class="govuk-table__cell" scope="row">
                  <span class="table-heading" aria-hidden="true">Status</span>
                  <div class="govuk-tag govuk-tag--{{app.tag}}">
                    {{app.status}}
                  </div>
                </td>
                <td id="1721147986456-submitted" class="govuk-table__cell submitted-column" scope="row">
                  <a href="{{copyLink}}" class="govuk-link govuk-link--no-visited-state">Copy</a>
                </td>
              </tr>
              {% set count = [1,2,3,4,5,6,7,8,9,11,12,14,16,17,19,20,23,25,26,27,28] | random %}
              {% if (day - count ) < 1 %}
                {% set day = 29 %}
                {% set month = month - 1 %}
                {% if month == 0 %}
                {% set month = 12 %}
                {% set year = year-1 %}
                {% endif %}
              {% endif %}
              {% set day = day - count%}
              {% endfor %}


            </tbody>
          </table>
          <nav class="govuk-pagination" role="navigation" aria-label="results">
  <ul class="govuk-pagination__list">
    <li class="govuk-pagination__item govuk-pagination__item--current">
      <a class="govuk-link govuk-pagination__link" href="#" aria-label="Page 1" aria-current="page">
        1
      </a>
    </li>
    <li class="govuk-pagination__item">
      <a class="govuk-link govuk-pagination__link" href="#" aria-label="Page 2">
        2
      </a>
    </li>
    <li class="govuk-pagination__item">
      <a class="govuk-link govuk-pagination__link" href="#" aria-label="Page 3">
        3
      </a>
    </li>
  </ul>
  <div class="govuk-pagination__next">
    <a class="govuk-link govuk-pagination__link" href="#" rel="next"> <span class="govuk-pagination__link-title">Next</span> <svg class="govuk-pagination__icon govuk-pagination__icon--next" xmlns="http://www.w3.org/2000/svg" height="13" width="15" aria-hidden="true" focusable="false" viewBox="0 0 15 13">
        <path d="m8.107-0.0078125-1.4136 1.414 4.2926 4.293h-12.986v2h12.896l-4.1855 3.9766 1.377 1.4492 6.7441-6.4062-6.7246-6.7266z"></path>
      </svg></a>
  </div>

</nav>
<p class="moj-pagination__results pull-right" style="margin-top:-80px" data-v-19f29262=""> Showing <b data-v-19f29262="">1</b> to <b data-v-19f29262="">10</b> of <b data-v-19f29262="">1783</b> applications </p>

        </div>
      </div>
    <script>
      window.addEventListener('load', function() {
        $(".clear-search-holder").hide()
        $(".search-what-cont").hide()
        $("#search").click(function(e) {
          $(".search-what-text").text($("#search-input").val());
          $(".search-what-cont").show();
          $(".result").each(function(e) {
            var text = $(this).text().toLowerCase();
            if (text.indexOf($("#search-input").val().toLowerCase()) > -1) {
              $(this).show();
            } else {
              $(this).hide();
            }
          });
        });
        $("#clear-search, .search-what-close").click(function(e) {
          $(".clear-search-holder").show()
          $(".search-what-text").text($("#search-input").val());
          $(".search-what-cont").show()
          clear - search - holder
          $(".search-what-cont").hide();
          $("#search-input").val("");
          $(".result").each(function(e) {
            $(this).show();
          });
          $(this).blur();
        });
      });
    </script>
    <script type="text/javascript">
      window.addEventListener('load', function() {
        var count = $('.govuk-table__row').length - 1
        // show hide content
        $('.defra-filter--content').hide()
        $('.defra-filter--action').show()
        $('#js-case-count').text(count);
        if (count == 0) {
          $('.govuk-table').hide()
        }
        $('.defra-filter--content').hide()
        $('#defra-filter--button').on("click", function() {
          if (!$('.defra-filter--action').hasClass('defra-filter--open')) {
            $('.defra-filter--content').show().focus()
            $('.defra-filter--action').addClass('defra-filter--open')
            $('#defra-filter--button').attr('aria-expanded', 'true');
            $(".defra-filter--button-content").text('Hide filters')
          } else {
            $('.defra-filter--content').hide()
            $('.defra-filter--action').removeClass('defra-filter--open')
            $('#defra-filter--button').attr('aria-expanded', 'false');
            $(".defra-filter--button-content").text('Show filters')
          }
        })
      })
    </script>
  </div>
{% endblock %}
