
{% extends "layout.html" %}

{% block pageTitle %}
  GOV.UK Prototype Kit
{% endblock %}

{% block beforeContent %}
  <div class="govuk-phase-banner">
    <p class="govuk-phase-banner__content">
      <strong class="govuk-tag govuk-phase-banner__content__tag">
        alpha
      </strong>
      <span class="govuk-phase-banner__text">
        This is a new service â€“ your <a class="govuk-link" href="#">feedback</a> will help us to improve it.
      </span>
    </p>
  </div>
{% endblock %} 
{% block content %}
  <div class="govuk-grid-row">
    <section class="govuk-grid-column-one-third defra-page-contents">
      <ul class="defra-contents-list">
          <li><a href="introduction">Introduction</a></li>
          <li><a href="application-naming-guidelines">Application naming guidelines</a></li>
          <li><a href="reference-guide">Reference guide</a></li>
          <li class="contents-list--active-item">
            <a href="authorisation">Authorisation</a>
            <ul class="defra-contents-list--dashed">
              <li>
                <a class="govuk-link" href="#user-restricted">User-restricted</a>
              </li>
              <li>
                <a class="govuk-link" href="#application-restricted">Application-restricted</a>
              </li>
            </ul>
          </li>
          <li><a href="sample-project">Sample project</a></li>
          <li><a href="terms-of-use">Terms of use</a></li>
      </ul>
    </section>
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-l">
        Authorisation
      </h1>
      <div class="govuk-warning-text">
        <span class="govuk-warning-text__icon" aria-hidden="true">!</span>
        <strong class="govuk-warning-text__text">
          <span class="govuk-warning-text__assistive">Warning</span>
          Currently you can only integrate with our sandbox environment. Production integration will be possible when the APIs have reached BETA
        </strong>
      </div>
      <p>Defra uses the OAuth2 Open Standard for access delegation and authorisation to its services and APIs to maintain security and integrity. There are two types of authentication methods in use: user-restricted and application-restricted endpoints, and customers are provided the option of either flow that suits their organisational requirements the most.</p>
      <div class="govuk-inset-text">All access tokens are time-bound and last for 1 hour at a time and can be silently regenerated by the system in either flow. Access is controlled based on the payload of the token, including the scopes that a user has accepted or the roles that are assigned to a system for a given organisation.</div>
      <h2 id="user-restricted" class="govuk-heading govuk-heading-m">User-restricted</h2>
      <p>For user-restricted, we use the OAuth2 Code flow which controls access to the services based on a user's credentials, their permissions, and scopes. In this flow, each person from a consuming service is required to have an account registered with us for their organisation. To send an API request and use our services, the user is required to sign-in with their credentials and approve various scopes and permissions, which will generate a unique token for them prior to sending the API requests.</p>
      <h2 id="application-restricted" class="govuk-heading govuk-heading-m">Application-restricted <span class="govuk-tag govuk-tag--blue m-l-15">Coming soon</span></h2>
      <p>The application-restricted method uses the OAuth Client Credentials with Certificates flow which controls access to services based on system-to-system interaction without a signed in user. In this flow there are no requirements to sign in or register users. The consuming system will have a set of access credentials including a Client Certificate for authentication which it must use to generate a certificate-signed access token prior to sending any API requests. This Certificate is used instead of a secret credential to prove the identity of the remote server.</p>
      <div class="defra-pagination">
        <a href="sample-project" class="govuk-link defra-pagination--link">
          <span class="defra-pagination--link-title">
            <span class="defra-pagination--symbol">
              <svg xmlns="http://www.w3.org/2000/svg" height="13" width="17" viewBox="0 0 17 13">
                <path d="m10.107-0.0078125-1.4136 1.414 4.2926 4.293h-12.986v2h12.896l-4.1855 3.9766 1.377 1.4492 6.7441-6.4062-6.7246-6.7266z"></path>
              </svg>
            </span>
            <span class="defra-pagination--link-text">
              Next
            </span>
            <span class="defra-pagination--divider govuk-visually-hidden">:</span>
          </span>
          <span class="defra-pagination--label">
            Sample project
          </span>
        </a>
      </div>
    </div>
  </div>
{% endblock %}
