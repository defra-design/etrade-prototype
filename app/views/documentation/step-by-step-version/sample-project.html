{% set documentationActive = true %}
{% extends "layout.html" %}

{% block pageTitle %}
  GOV.UK Prototype Kit
{% endblock %}

{% block beforeContent %}
  <div class="govuk-phase-banner">
    <p class="govuk-phase-banner__content">
      <strong class="govuk-tag govuk-phase-banner__content__tag">
        alpha
      </strong>
      <span class="govuk-phase-banner__text">
        This is a new service â€“ your <a class="govuk-link" href="#">feedback</a> will help us to improve it.
      </span>
    </p>
  </div>
  <div class="app-step-nav-header">
    <span class="app-step-nav-header__part-of">Part of</span>
    <a class="app-step-nav-header__title" href="#">
      Defra API Developer Portal user guide
    </a>
  </div>
{% endblock %} 
{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-l">
        Sample project
      </h1>

      <h2 class="govuk-heading-s defra-contents-title">Contents</h2>
      <ul class="govuk-list defra-contents-list--dashed">
        <li>
          <a class="govuk-link" href="#requirements">Requirements</a>
        </li>
        <li>
          <a class="govuk-link" href="#setting-up-the-project">Setting up the project</a>
        </li>
        <li>
          <a class="govuk-link" href="#running-the-project">Running the project</a>
        </li>
      </ul>
    </div>
  </div>
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds defra-column-hr">
      <div class="govuk-warning-text">
        <span class="govuk-warning-text__icon" aria-hidden="true">!</span>
        <strong class="govuk-warning-text__text">
          <span class="govuk-warning-text__assistive">Warning</span>
          Currently you can only integrate with our sandbox environment. Production integration will be possible when the APIs have reached BETA
        </strong>
      </div>
      <p>The digital Assistance Scheme demo project can be downloaded and used by developers to view and try out the steps for authenticating as a user, accepting the relevant scopes, contacting a protected Defra API and then viewing the response from that API on screen.</p>
      <p>The protected API endpoint that is contacted in this demo project is the <a href="#">EHC Metadata endpoint</a> on the Export Health Certificates API.</p>
      <h2 id="requirements" class="govuk-heading govuk-heading-m">Requirements</h2>
      <ul class="govuk-list govuk-list--bullet">
        <li>A version of Visual Studio supporting ASP .NET Core 3.1.</li>
        <li>Login credentials for an active account on the Defra API developer portal.</li>
        <li>Client ID, client secret and redirect URL for an active application created via the Defra API developer portal.</li>
      </ul>
      <h2 id="setting-up-the-project" class="govuk-heading govuk-heading-m">Setting up the project</h2>

      <ol class="govuk-list govuk-list--number">
        <li>Download or clone the GitHub repository from https://github.com/DEFRA/digital-assistance-scheme.</li>
        <li>Open the <pre class="code">appsettings.Development.json</pre> file and add following from your application created in the Defra API developer portal:
          <ul class="govuk-list govuk-list--bullet">
              <li>Set the ClientId to your applications Client ID.</li>
              <li>Set the ClientSecret to your applications Client secret.</li>
              <li>Set the RedirectUri to your applications redirect URI - This should be a localhost address with the /auth route appended e.g. https://localhost:44396/auth.</li>
          </ul>
        </li>
      </ol>
      <h2 id="running-the-project" class="govuk-heading govuk-heading-m">Running the project</h2>
      <p>Run the project from Visual Studio and then you may follow the on screen steps which will walk through the process of:</p>
      <ul class="govuk-list govuk-list--bullet">
        <li>Building requests.</li>
        <li>Logging in using your Defra API developer portal account.</li>
        <li>Accepting scopes as a user for contacting APIs.</li>
        <li>Requesting access and refresh tokens.</li>
        <li>Using the access token to make a request to a protected API.</li>
        <li>Viewing the response from the request on screen.</li>
      </ul>

      <div class="defra-pagination">
        <a href="terms-of-use" class="govuk-link defra-pagination--link">
          <span class="defra-pagination--link-title">
            <span class="defra-pagination--symbol">
              <svg xmlns="http://www.w3.org/2000/svg" height="13" width="17" viewBox="0 0 17 13">
                <path d="m10.107-0.0078125-1.4136 1.414 4.2926 4.293h-12.986v2h12.896l-4.1855 3.9766 1.377 1.4492 6.7441-6.4062-6.7246-6.7266z"></path>
              </svg>
            </span>
            <span class="defra-pagination--link-text">
              Next
            </span>
            <span class="defra-pagination--divider govuk-visually-hidden">:</span>
          </span>
          <span class="defra-pagination--label">
            Terms of use
          </span>
        </a>
      </div>
    </div>

    <div class="govuk-grid-column-one-third">

      {{ stepByStepNavigation(
        {
          id: 'defra-step-by-step-5',
          currentDefaultStep: 5
        }
      ) }}

    </div>

  </div>
{% endblock %}
